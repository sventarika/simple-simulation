// For format details, see https://aka.ms/devcontainer.json. For config options, see the README at:
// https://github.com/microsoft/vscode-dev-containers/tree/v0.245.2/containers/docker-existing-dockerfile
{
	"name": "simple-simulation",
	"build": {"dockerfile": "../Dockerfile"},

	"runArgs": [
		"--net=host"
	],

	"workspaceMount": "source=${localWorkspaceFolder},target=/work/develop/simple-simulation,type=bind",
	"workspaceFolder": "/work/develop/simple-simulation",

	"customizations": {
		"vscode": {
			"extensions": [
				"ms-python.python",
				"ms-python.vscode-pylance",
				"ms-python.debugpy",
				"eamodio.gitlens",
				"mhutchie.git-graph",
				"mechatroner.rainbow-csv",
				"analytic-signal.preview-mp4",
				"tamasfe.even-better-toml",
				"charliermarsh.ruff"
			],
			"settings": {
				"python.defaultInterpreterPath": "/work/develop/simple-simulation/.venv/bin/python",
				"python.testing.pytestEnabled": true,
				"python.testing.unittestEnabled": false,
				"python.testing.pytestArgs": [
					"test"
				],
				"python.analysis.extraPaths": [
					"/work/simple-simulation"
				],
				"[python]": {
					"editor.formatOnSave": true,
					"editor.codeActionsOnSave": {
						"source.organizeImports": "explicit",
						"source.fixAll": "explicit"
					}
				},
				"ruff.enable": true,
				"ruff.lint.enable": true,
				"files.watcherExclude": {
					"**/.venv/**": true,
					"**/__pycache__/**": true
				}
			}
		}
	},

	"postCreateCommand": "uv sync --dev",

	"remoteUser": "root"
}
